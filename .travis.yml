sudo: required

env:
 - DIST=precise
 - DIST=trusty

before_install:
 - sudo apt-get update -qq
 - sudo apt-get install pbuilder aptitude ubuntu-dev-tools
 - pbuilder-dist ${DIST} create --debootstrapopts --variant=buildd
 - sudo pip install cpp-coveralls

script:
 - sed -i "s:precise:${DIST}:g" debian/changelog
 - debuild -S -uc
 - sudo chmod a+rwx /var/cache/pbuilder/ccache
 - pbuilder-dist ${DIST} build ../*.dsc

after_success: coveralls --gcov-options '\-lp'

os: linux
